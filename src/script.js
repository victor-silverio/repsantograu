document.addEventListener('DOMContentLoaded', () => { const mobileMenuButton = document.getElementById('mobile-menu-btn'); const mobileMenu = document.getElementById('mobile-menu'); if (mobileMenuButton && mobileMenu) { mobileMenuButton.addEventListener('click', () => { const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true'; mobileMenuButton.setAttribute('aria-expanded', !isExpanded); mobileMenu.classList.toggle('hidden'); }); const mobileLinks = mobileMenu.querySelectorAll('a'); mobileLinks.forEach(link => { link.addEventListener('click', () => { mobileMenu.classList.add('hidden'); mobileMenuButton.setAttribute('aria-expanded', 'false'); }); }); } const revealElements = document.querySelectorAll('.reveal'); const amenitiesContainer = document.getElementById('amenities-container'); if (amenitiesContainer) { fetch('src/amenities.json').then(response => response.json()).then(data => { const amenitiesHTML = data.map(item => `<div class="flex items-start gap-3"><div class="mt-1 w-6 flex justify-center flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" class="w-5 h-5 text-repGold"><path fill="currentColor" d="${item.iconPath}" /></svg></div><span class="text-gray-700">${item.content}</span></div>`).join(''); amenitiesContainer.innerHTML = amenitiesHTML; }).catch(error => console.error('Error loading amenities:', error)); } if (revealElements.length > 0) { const revealObserver = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('active'); revealObserver.unobserve(entry.target); } }); }, { threshold: 0.15, rootMargin: "0px 0px -50px 0px" }); revealElements.forEach(element => revealObserver.observe(element)); } const slider = document.getElementById('timeline-carousel'); const btnLeft = document.getElementById('scroll-left'); const btnRight = document.getElementById('scroll-right'); if (slider) { const items = slider.querySelectorAll('.snap-center'); let ticking = false; const updateUI = () => { if (btnLeft && btnRight) { if (!ticking) { window.requestAnimationFrame(() => { const sl = slider.scrollLeft; const max = slider.scrollWidth - slider.clientWidth - 20; btnLeft.style.opacity = sl > 20 ? '1' : '0'; btnRight.style.opacity = sl < max ? '1' : '0'; ticking = false; }); ticking = true; } } }; slider.addEventListener('scroll', updateUI); window.addEventListener('resize', updateUI); updateUI(); if (btnLeft && btnRight) { btnLeft.addEventListener('click', () => { const itemWidth = items[0].offsetWidth + 24; slider.scrollBy({ left: -itemWidth, behavior: 'smooth' }); }); btnRight.addEventListener('click', () => { const itemWidth = items[0].offsetWidth + 24; slider.scrollBy({ left: itemWidth, behavior: 'smooth' }); }); } let isDown = false; let startX; let scrollLeft; slider.querySelectorAll('img').forEach(img => img.setAttribute('draggable', 'false')); slider.addEventListener('pointerdown', (e) => { if (e.pointerType !== 'mouse') return; isDown = true; e.preventDefault(); slider.setPointerCapture(e.pointerId); slider.classList.add('cursor-grabbing'); slider.classList.remove('cursor-grab', 'snap-x', 'snap-mandatory', 'scroll-smooth'); startX = e.pageX - slider.offsetLeft; scrollLeft = slider.scrollLeft; }); const stopDrag = (e) => { if (!isDown) return; if (e.pointerType !== 'mouse') return; isDown = false; slider.releasePointerCapture(e.pointerId); slider.classList.remove('cursor-grabbing'); const center = slider.scrollLeft + (slider.clientWidth / 2); let closestItem = null; let minDistance = Infinity; items.forEach((item) => { const itemCenter = item.offsetLeft + (item.offsetWidth / 2); const distance = Math.abs(center - itemCenter); if (distance < minDistance) { minDistance = distance; closestItem = item; } }); if (closestItem) { closestItem.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' }); } setTimeout(() => { slider.classList.add('cursor-grab', 'snap-x', 'snap-mandatory', 'scroll-smooth'); }, 600); }; slider.addEventListener('pointerleave', stopDrag); slider.addEventListener('pointerup', stopDrag); slider.addEventListener('pointercancel', stopDrag); slider.addEventListener('pointermove', (e) => { if (!isDown) return; if (e.pointerType !== 'mouse') return; e.preventDefault(); const x = e.pageX - slider.offsetLeft; const walk = (x - startX) * 1.5; slider.scrollLeft = scrollLeft - walk; }); let animationId; slider.addEventListener('touchend', () => { isDown = false; slider.classList.remove('cursor-grabbing'); slider.classList.add('cursor-grab', 'snap-x', 'snap-mandatory', 'scroll-smooth'); }); slider.addEventListener('touchmove', (e) => { if (!isDown) return; if (animationId) cancelAnimationFrame(animationId); animationId = requestAnimationFrame(() => { const x = e.touches[0].pageX - slider.offsetLeft; const walk = (x - startX) * 2; slider.scrollLeft = scrollLeft - walk; }); }, { passive: true }); } if ('serviceWorker' in navigator) { window.addEventListener('load', () => { navigator.serviceWorker.register('/sw.js').then(registration => { console.log('Service Worker registrado com sucesso:', registration.scope); }).catch(error => { console.log('Falha ao registrar Service Worker:', error); }); }); } const lightbox = document.getElementById('lightbox'); const lightboxImg = document.getElementById('lightbox-img'); const lightboxCaption = document.getElementById('lightbox-caption'); const closeBtn = document.getElementById('lightbox-close'); const prevBtn = document.getElementById('lightbox-prev'); const nextBtn = document.getElementById('lightbox-next'); const galleryImages = document.querySelectorAll('.gallery-img'); if (lightbox && galleryImages.length > 0) { let currentIndex = 0; const imagesList = Array.from(galleryImages); const openLightbox = (index) => { currentIndex = index; const img = imagesList[currentIndex]; lightboxImg.src = img.getAttribute('data-full') || img.src; lightboxCaption.textContent = img.getAttribute('alt') || ''; lightbox.classList.remove('hidden'); setTimeout(() => { lightbox.classList.remove('opacity-0'); }, 10); document.body.style.overflow = 'hidden'; }; const closeLightbox = () => { lightbox.classList.add('opacity-0'); setTimeout(() => { lightbox.classList.add('hidden'); lightboxImg.src = ''; }, 300); document.body.style.overflow = ''; }; const showNext = () => { currentIndex = (currentIndex + 1) % imagesList.length; openLightbox(currentIndex); }; const showPrev = () => { currentIndex = (currentIndex - 1 + imagesList.length) % imagesList.length; openLightbox(currentIndex); }; imagesList.forEach((img, index) => { img.addEventListener('click', () => openLightbox(index)); }); closeBtn.addEventListener('click', closeLightbox); lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); }); nextBtn?.addEventListener('click', (e) => { e.stopPropagation(); showNext(); }); prevBtn?.addEventListener('click', (e) => { e.stopPropagation(); showPrev(); }); document.addEventListener('keydown', (e) => { if (lightbox.classList.contains('hidden')) return; if (e.key === 'Escape') closeLightbox(); if (e.key === 'ArrowRight') showNext(); if (e.key === 'ArrowLeft') showPrev(); }); let touchStartX = 0; let touchEndX = 0; lightbox.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; }, { passive: true }); lightbox.addEventListener('touchend', (e) => { touchEndX = e.changedTouches[0].screenX; handleSwipe(); }, { passive: true }); const handleSwipe = () => { if (touchEndX < touchStartX - 50) showNext(); if (touchEndX > touchStartX + 50) showPrev(); }; } });